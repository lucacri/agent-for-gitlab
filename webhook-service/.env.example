# Claude Code GitLab Webhook Service Configuration
# Copy this file to .env and update with your values

# ========================================
# Application Configuration
# ========================================
NODE_ENV=production
PORT=3000
LOG_LEVEL=info
LOG_FORMAT=json
TZ=UTC

# ========================================
# GitLab Configuration
# ========================================
GITLAB_URL=https://gitlab.com
# For self-hosted: GITLAB_URL=https://gitlab.company.com

# GitLab Personal Access Token (with api scope)
GITLAB_TOKEN=your_gitlab_personal_access_token

# GitLab Pipeline Trigger Token (create in CI/CD settings)
GITLAB_TRIGGER_TOKEN=your_gitlab_trigger_token

# Optional: Webhook secret for signature verification
GITLAB_WEBHOOK_SECRET=your_webhook_secret

# GitLab project configuration
GITLAB_PROJECT_ID=your_project_id
GITLAB_REF=main

# ========================================
# Claude Configuration
# ========================================
# Option 1: Claude Code OAuth Token (recommended)
CLAUDE_CODE_OAUTH_TOKEN=your_claude_oauth_token

# Option 2: Traditional Anthropic API Key
# ANTHROPIC_API_KEY=your_anthropic_api_key

# Trigger phrase that activates Claude
CLAUDE_TRIGGER_PHRASE=@claude

# Claude processing configuration
CLAUDE_MAX_RETRIES=3
CLAUDE_TIMEOUT=300000

# ========================================
# Redis Configuration (optional)
# ========================================
REDIS_URL=redis://redis:6379
REDIS_PASSWORD=changeme
ENABLE_RATE_LIMITING=false
RATE_LIMIT_WINDOW=900
RATE_LIMIT_MAX_REQUESTS=100

# ========================================
# Security Configuration
# ========================================
# Comma-separated list of allowed origins for CORS
ALLOWED_ORIGINS=
# Set to true if behind a proxy (nginx, cloudflare, etc.)
TRUST_PROXY=false
# Enable security headers
SECURE_HEADERS=true

# Optional: Webhook URL override (for public access)
WEBHOOK_URL=https://your-domain.com/webhook/gitlab

# ========================================
# Docker Configuration
# ========================================
# Docker image version
VERSION=latest
BUILD_DATE=
VCS_REF=

# ========================================
# Nginx Configuration (optional)
# ========================================
HTTP_PORT=80
HTTPS_PORT=443

# ========================================
# Monitoring Configuration (optional)
# ========================================
PROMETHEUS_PORT=9090
GRAFANA_PORT=3001
GRAFANA_USER=admin
GRAFANA_PASSWORD=changeme